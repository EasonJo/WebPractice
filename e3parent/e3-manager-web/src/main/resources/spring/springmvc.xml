<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
    xmlns:duboo="http://code.alibabatech.com/schema/dubbo" xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"
    default-autowire="byName">

    <context:component-scan base-package="cn.e3mall.controller" />
    <!-- 注解驱动 -->
    <mvc:annotation-driven />

    <context:property-placeholder location="classpath:conf/resource.properties"/>

    <!-- 配置Conveter转换器  转换工厂 （日期、去掉前后空格)
    <bean class="org.springframework.format.support.FormattingConversionServiceFactoryBean"
        name="formattingConversionService">
        <property name="converters">
            <list>
                <bean class="cn.eason.conversion.DateConversion" />
            </list>
        </property>
    </bean>-->

    <!--视图解析器-->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:suffix=".jsp" />

    <!--静态资源映射-->
    <mvc:resources mapping="/css/**" location="/css/" />
    <mvc:resources mapping="/js/**" location="/js/" />

    <!--文件上传解析器-->
    <bean class="org.springframework.web.multipart.commons.CommonsMultipartResolver" name="multipartResolver">
        <property name="maxUploadSize" value="5000000" />
    </bean>


    <!--  拦截器
      <mvc:interceptors>
           登录拦截器
          <mvc:interceptor>
              <mvc:mapping path="/**" />
              <bean class="cn.eason.interceptor.LoginInterceptor" />
          </mvc:interceptor>
      </mvc:interceptors>-->

    <!--客户端名称-->
    <dubbo:application name="e3-manager-web" />

    <!--注册中心地址-->
    <duboo:registry protocol="zookeeper" address="localhost:2181" />

    <!--使用的服务名称,会从服务中心找 Id 对应的服务-->
    <dubbo:reference interface="cn.e3mall.service.ItemService" id="itemService" />
    <dubbo:reference interface="cn.e3mall.service.ItemCatService" id="itemCatService" />
    <dubbo:reference interface="cn.e3mall.content.service.ContentCategoryService" id="contentCategoryService"/>
    <dubbo:reference interface="cn.e3mall.content.service.ContentService" id="contentService"/>

</beans>